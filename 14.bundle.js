(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{480:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 17 modules\nvar es = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(20);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ./src/Components/AtomicComponents/Processing.js\nvar Processing = __webpack_require__(87);\n\n// EXTERNAL MODULE: ./src/actions/pomodoroSessions.js\nvar pomodoroSessions = __webpack_require__(88);\n\n// CONCATENATED MODULE: ./src/Components/AtomicComponents/Notification.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Notification = function Notification() {\n  var _this = this;\n\n  _classCallCheck(this, Notification);\n\n  _defineProperty(this, "sendNotification", function (msg) {\n    try {\n      if (window.Notification.permission === \'granted\') {\n        _this.notification = new window.Notification(\'FocusedTomato\', {\n          body: msg\n        });\n\n        _this.notification.onclick = function () {\n          window.focus();\n        };\n      }\n    } catch (_unused) {}\n  });\n\n  window.Notification.requestPermission(function (permission) {\n    if (!window.Notification.permission) {\n      window.Notification.permission = permission;\n    }\n  });\n};\n\n/* harmony default export */ var AtomicComponents_Notification = (Notification);\n// CONCATENATED MODULE: ./src/Components/Focus.js\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === \'function\') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { Focus_defineProperty(target, key, source[key]); }); } return target; }\n\nfunction Focus_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction Focus_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n //====Lazy loading====\n\nvar Clock = react_default.a.lazy(function () {\n  return __webpack_require__.e(/* import() */ 6).then(__webpack_require__.bind(null, 475));\n});\nvar Indicators = react_default.a.lazy(function () {\n  return __webpack_require__.e(/* import() */ 15).then(__webpack_require__.bind(null, 483));\n});\nvar Button = react_default.a.lazy(function () {\n  return __webpack_require__.e(/* import() */ 11).then(__webpack_require__.bind(null, 266));\n});\nvar TaskList = react_default.a.lazy(function () {\n  return __webpack_require__.e(/* import() */ 12).then(__webpack_require__.bind(null, 249));\n});\nvar Sound = react_default.a.lazy(function () {\n  return __webpack_require__.e(/* import() */ 9).then(__webpack_require__.bind(null, 476));\n});\n\n\n\nvar Focus_Focus =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Focus, _Component);\n\n  function Focus(props) {\n    var _this;\n\n    Focus_classCallCheck(this, Focus);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Focus).call(this, props));\n\n    Focus_defineProperty(_assertThisInitialized(_this), "onTaskChange", function (selectedTask) {\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          btnStatus: "play3"\n        });\n      });\n\n      _this.updateTask(selectedTask); //this.updateRootStore();\n\n    });\n\n    _this.notification = new AtomicComponents_Notification(); //local state for the startwatch\n\n    _this.sounds = {\n      ring: react_default.a.createRef(),\n      ticking: react_default.a.createRef()\n    };\n    _this.config = {\n      duration: 0,\n      newSession: true,\n      intId: -1,\n      paused: false,\n      break: false,\n      local: {\n        min: 0,\n        sec: 0\n      }\n    }; //=====================================================================\n\n    /*different store, that is not rendering had to do this, as setState is async \n    and took time to update this data which is not rendering and\n      as redux store is different occassionaly lagged behind */\n\n    _this.selectedTask = {\n      task: \'\',\n      completed: 0,\n      incomplete: 0\n    };\n    _this.state = {\n      totalSessions: 0,\n      completed: 0,\n      btnStatus: \'play3\',\n      pass: {\n        min: \'00\',\n        sec: \'00\',\n        percentage: 0\n      }\n    }; //updating redux store with completed and incomplete sessions\n\n    _this.updateRootStore = function () {\n      _this.props.dispatch(Object(pomodoroSessions["a" /* startAddSession */])({\n        date: moment_default()().format(\'YYYYMMDD\'),\n        data: _this.selectedTask\n      }));\n    };\n\n    _this.updateTask = function (task) {\n      _this.selectedTask.task = task;\n\n      if (_this.props.data) {\n        _this.selectedTask.completed = _this.props.data[_this.selectedTask.task] ? _this.props.data[_this.selectedTask.task].completed : 0;\n        _this.selectedTask.incomplete = _this.props.data[_this.selectedTask.task] ? _this.props.data[_this.selectedTask.task].incomplete : 0;\n      } else {\n        _this.selectedTask.completed = 0;\n        _this.selectedTask.incomplete = 0;\n      } //changed cause thought whatever is being rendered needs to be in state\n\n\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          totalSessions: _this.props.tasks[_this.selectedTask.task],\n          completed: _this.selectedTask.completed\n        });\n      }); //console.log(this.props.data)\n\n\n      _this.updateRootStore();\n\n      _this.stop();\n    };\n\n    _this.increCompleted = function () {\n      //one can\'t complete more than targets\n      if (_this.selectedTask.completed === _this.state.totalSessions) return;\n      _this.selectedTask.completed = _this.selectedTask.completed + 1;\n\n      _this.updateRootStore();\n\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          completed: _this.selectedTask.completed\n        });\n      });\n\n      if (!_this.props.settings.silent) _this.sounds.ring.current.play();\n      if (_this.props.settings.notification) _this.notification.sendNotification(\'Well Done! You completed your focused session!\');\n    };\n\n    _this.increIncompleted = function () {\n      _this.selectedTask.incomplete = _this.selectedTask.incomplete + 1;\n\n      _this.updateRootStore();\n    }; //=======================================================================\n\n\n    _this.startSession = function () {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'focusDuration\';\n      var intervalId = setInterval(function () {\n        //if 1 second is left decrement minutes by 1 and set seconds to 59\n        if (_this.config.local.sec === 1 || _this.config.local.sec === 0) {\n          _this.config.local.min = _this.config.local.min - 1;\n          _this.config.local.sec = 59;\n        } else {\n          _this.config.local.sec = _this.config.local.sec - 1;\n        }\n\n        if (_this.config.local.min < 0) {\n          _this.config.local.min = 0;\n          _this.config.local.sec = 0;\n        }\n\n        _this.setState(function (state) {\n          return _objectSpread({}, state, {\n            pass: {\n              min: _this.config.local.min > 9 ? _this.config.local.min.toString() : "0".concat(_this.config.local.min.toString()),\n              sec: _this.config.local.sec > 9 ? _this.config.local.sec.toString() : "0".concat(_this.config.local.sec.toString()),\n              percentage: (_this.config.local.min * 60 + _this.config.local.sec) / (_this.config.duration * 60) * 100\n            }\n          });\n        }); //if it was last minute and time\'s up it would have been set to -1 while checking sec ===1 above\n\n\n        if (_this.config.local.min === 0 && _this.config.local.sec === 0) {\n          if (type === \'focusDuration\') {\n            _this.setState(function (state) {\n              return _objectSpread({}, state, {\n                btnStatus: \'mug\'\n              });\n            });\n\n            _this.config.break = true;\n\n            _this.increCompleted();\n          } else {\n            _this.setState(function (state) {\n              return _objectSpread({}, state, {\n                btnStatus: \'play3\'\n              });\n            });\n\n            _this.config.break = false;\n          }\n\n          _this.config.newSession = true;\n          clearInterval(_this.config.intId);\n          _this.config.intId = -1;\n        }\n      }, 1000);\n      _this.config.intId = intervalId;\n      _this.config.newSession = false;\n    };\n\n    _this.pause = function () {\n      _this.config.paused = true;\n      clearInterval(_this.config.intId);\n      _this.config.intId = -1;\n    };\n\n    _this.stop = function () {\n      if (_this.config.intId !== -1 || _this.config.paused) {\n        if (!_this.config.break) _this.increIncompleted();\n      }\n\n      _this.config.break = false;\n      _this.config.paused = false;\n      _this.config.newSession = true;\n      _this.config.local.min = 0;\n      _this.config.local.sec = 0;\n\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          btnStatus: \'play3\',\n          pass: {\n            min: \'00\',\n            sec: \'00\',\n            percentage: 0\n          }\n        });\n      });\n\n      clearInterval(_this.config.intId);\n      _this.config.intId = -1;\n    }; //function to control the clock\n\n\n    _this.watchControl = function () {\n      if (_this.state.totalSessions - _this.state.completed === 0) return;\n\n      if (_this.config.newSession && !_this.config.break) {\n        //clock may be is being started after it was paused in that case no need to update clock state\n        if (!_this.config.paused) {\n          _this.config.duration = _this.props.settings.focusDuration;\n          _this.config.local.min = _this.props.settings.focusDuration;\n          _this.config.local.sec = 0;\n\n          _this.setState(function (state) {\n            return _objectSpread({}, state, {\n              btnStatus: \'pause2\',\n              pass: {\n                min: _this.props.settings.focusDuration < 9 ? "0".concat(_this.props.settings.focusDuration) : "".concat(_this.props.settings.focusDuration),\n                sec: "00",\n                percentage: 100\n              }\n            });\n          });\n        }\n\n        _this.startSession();\n      } else if (!_this.config.newSession && !_this.config.paused && !_this.config.break) {\n        _this.setState(function (state) {\n          return _objectSpread({}, state, {\n            btnStatus: \'play3\'\n          });\n        });\n\n        _this.pause();\n      } else if (!_this.config.newSession && _this.config.paused && !_this.config.break) {\n        _this.config.paused = false;\n\n        _this.setState(function (state) {\n          return _objectSpread({}, state, {\n            btnStatus: \'pause2\'\n          });\n        });\n\n        _this.startSession();\n      } else if (!_this.config.newSession && _this.config.break) {\n        _this.stop();\n      } else {\n        _this.sounds.ring.current.pause();\n\n        if (_this.state.completed % 4 === 0 && _this.state.totalSessions - _this.state.completed > 4) {\n          //longbreak\n          _this.config.duration = _this.props.settings.longBreakDuration;\n          _this.config.local.min = _this.props.settings.longBreakDuration;\n\n          _this.setState(function (state) {\n            return _objectSpread({}, state, {\n              btnStatus: \'next2\',\n              pass: {\n                min: "".concat(_this.props.settings.longBreakDuration),\n                sec: "00",\n                percentage: 100\n              }\n            });\n          });\n\n          _this.startSession(\'\');\n        } else {\n          //shortbreak\n          _this.config.duration = _this.props.settings.shortBreakDuration;\n          _this.config.local.min = _this.props.settings.shortBreakDuration;\n\n          _this.setState(function (state) {\n            return _objectSpread({}, state, {\n              btnStatus: \'next2\',\n              pass: {\n                min: "0".concat(_this.props.settings.shortBreakDuration),\n                sec: "00",\n                percentage: 100\n              }\n            });\n          });\n\n          _this.startSession(\'\');\n        }\n      }\n    };\n\n    _this.addAminute = function () {\n      _this.config.local.min += 1;\n      _this.config.duration += 1;\n    };\n\n    _this.deductAminute = function () {\n      if (_this.config.local.min > 1) {\n        _this.config.local.min -= 1;\n      } else {\n        _this.config.local.min = 0;\n        _this.config.local.sec = 1;\n      }\n    };\n\n    _this.restart = function () {\n      //completed task can\'t be negative\n      if (_this.selectedTask.completed === 0) return;\n      _this.selectedTask.completed = _this.selectedTask.completed - 1;\n\n      _this.updateRootStore();\n\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          completed: _this.selectedTask.completed\n        });\n      });\n\n      _this.stop();\n    };\n\n    return _this;\n  }\n\n  _createClass(Focus, [{\n    key: "componentDidMount",\n    //loads the initial task to the state\n    value: function componentDidMount() {\n      if (this.props.tasks) {\n        var tasks = Object.keys(this.props.tasks);\n        this.updateTask(tasks[0]);\n      }\n    } //function to handle when task is changed \n\n  }, {\n    key: "render",\n\n    /*=====================================================================================================*/\n    value: function render() {\n      return react_default.a.createElement(react["Suspense"], {\n        fallback: react_default.a.createElement("div", {\n          className: "dynamicload"\n        }, react_default.a.createElement(Processing["a" /* default */], null))\n      }, react_default.a.createElement("div", {\n        className: "focus"\n      }, react_default.a.createElement(Indicators, {\n        active: this.state.totalSessions - this.state.completed,\n        inactive: this.state.completed\n      }), react_default.a.createElement("div", {\n        className: "focus__btnPanel"\n      }, react_default.a.createElement(Button, {\n        icon: \'plus\',\n        clicked: this.addAminute\n      }), react_default.a.createElement(TaskList, {\n        onTaskChange: this.onTaskChange\n      }), react_default.a.createElement(Button, {\n        icon: \'minus\',\n        clicked: this.deductAminute\n      })), react_default.a.createElement(Clock, this.state.pass), react_default.a.createElement("div", {\n        className: "focus__btnPanel"\n      }, react_default.a.createElement(Button, {\n        icon: this.state.btnStatus,\n        clicked: this.watchControl\n      }), react_default.a.createElement(Button, {\n        icon: \'undo\',\n        clicked: this.restart\n      }), react_default.a.createElement(Button, {\n        icon: \'stop2\',\n        clicked: this.stop\n      })), react_default.a.createElement(Sound, {\n        ref: this.sounds.ring\n      })));\n    }\n  }]);\n\n  return Focus;\n}(react["Component"]);\n\nvar Focus_mapsStateToProps = function mapsStateToProps(state) {\n  // console.log(state)\n  if (state.tasks) {\n    return {\n      data: state.data[moment_default()().format(\'YYYYMMDD\')],\n      tasks: state.tasks,\n      settings: state.config\n    };\n  } else {\n    return {\n      data: state.data[moment_default()().format(\'YYYYMMDD\')],\n      tasks: false,\n      settings: state.config\n    };\n  }\n};\n\nvar ConnectedFocus = Object(es["b" /* connect */])(Focus_mapsStateToProps)(Focus_Focus);\n/* harmony default export */ var Components_Focus = __webpack_exports__["default"] = (ConnectedFocus);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQXRvbWljQ29tcG9uZW50cy9Ob3RpZmljYXRpb24uanM/OGNlMiIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Gb2N1cy5qcz8xM2M2Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIE5vdGlmaWNhdGlvbntcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB3aW5kb3cuTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKChwZXJtaXNzaW9uKSA9PiB7XG4gICAgICAgICAgICBpZighKHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbikpe1xuICAgICAgICAgICAgICAgIHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbiA9IHBlcm1pc3Npb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNlbmROb3RpZmljYXRpb24gPSAobXNnKSA9PiB7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGlmKHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5ldyB3aW5kb3cuTm90aWZpY2F0aW9uKCdGb2N1c2VkVG9tYXRvJyx7XG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IG1zZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfWNhdGNoe31cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5vdGlmaWNhdGlvbjsiLCJpbXBvcnQgUmVhY3Qse0NvbXBvbmVudCwgU3VzcGVuc2V9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5pbXBvcnQgUHJvY2Vzc2luZyBmcm9tICcuL0F0b21pY0NvbXBvbmVudHMvUHJvY2Vzc2luZyc7XG4vLz09PT1MYXp5IGxvYWRpbmc9PT09XG5jb25zdCBDbG9jayA9IFJlYWN0LmxhenkoKCkgPT4gaW1wb3J0KCcuL0F0b21pY0NvbXBvbmVudHMvQ2xvY2snKSk7XG5jb25zdCBJbmRpY2F0b3JzID0gUmVhY3QubGF6eSgoKSA9PiBpbXBvcnQoJy4vSW5kaWNhdG9yQ29tcG9uZW50L0luZGljYXRvcnMnKSk7XG5jb25zdCBCdXR0b24gPSBSZWFjdC5sYXp5KCgpID0+IGltcG9ydCgnLi9BdG9taWNDb21wb25lbnRzL0J1dHRvbicpKTtcbmNvbnN0IFRhc2tMaXN0ID0gUmVhY3QubGF6eSgoKSA9PiBpbXBvcnQoJy4vQXRvbWljQ29tcG9uZW50cy9UYXNrTGlzdCcpKTtcbmNvbnN0IFNvdW5kID0gUmVhY3QubGF6eSgoKSA9PiBpbXBvcnQoJy4vQXRvbWljQ29tcG9uZW50cy9Tb3VuZCcpKTtcbmltcG9ydCB7c3RhcnRBZGRTZXNzaW9ufSBmcm9tICcuLi9hY3Rpb25zL3BvbW9kb3JvU2Vzc2lvbnMnO1xuaW1wb3J0IE5vdGlmaWNhdGlvbiBmcm9tICcuL0F0b21pY0NvbXBvbmVudHMvTm90aWZpY2F0aW9uJztcblxuXG5cbmNsYXNzIEZvY3VzIGV4dGVuZHMgQ29tcG9uZW50e1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKVxuICAgICAgICAvL2xvY2FsIHN0YXRlIGZvciB0aGUgc3RhcnR3YXRjaFxuICAgICAgICB0aGlzLnNvdW5kcyA9IHtcbiAgICAgICAgICAgIHJpbmc6IFJlYWN0LmNyZWF0ZVJlZigpLFxuICAgICAgICAgICAgdGlja2luZzogUmVhY3QuY3JlYXRlUmVmKClcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbmZpZyA9e1xuICAgICAgICAgICAgZHVyYXRpb24gOiAwLFxuICAgICAgICAgICAgbmV3U2Vzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgIGludElkOiAtMSxcbiAgICAgICAgICAgIHBhdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBicmVhazogZmFsc2UsXG4gICAgICAgICAgICBsb2NhbDoge1xuICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICBzZWM6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKmRpZmZlcmVudCBzdG9yZSwgdGhhdCBpcyBub3QgcmVuZGVyaW5nIGhhZCB0byBkbyB0aGlzLCBhcyBzZXRTdGF0ZSBpcyBhc3luYyBcbiAgICAgICAgYW5kIHRvb2sgdGltZSB0byB1cGRhdGUgdGhpcyBkYXRhIHdoaWNoIGlzIG5vdCByZW5kZXJpbmcgYW5kXG4gICAgICAgICAgYXMgcmVkdXggc3RvcmUgaXMgZGlmZmVyZW50IG9jY2Fzc2lvbmFseSBsYWdnZWQgYmVoaW5kICovXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUYXNrPSB7XG4gICAgICAgICAgICB0YXNrOicnLFxuICAgICAgICAgICAgY29tcGxldGVkOiAwLFxuICAgICAgICAgICAgaW5jb21wbGV0ZTogMFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB0b3RhbFNlc3Npb25zOjAsXG4gICAgICAgICAgICBjb21wbGV0ZWQ6IDAsXG4gICAgICAgICAgICBidG5TdGF0dXM6ICdwbGF5MycsXG4gICAgICAgICAgICBwYXNzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAnMDAnLFxuICAgICAgICAgICAgICAgIHNlYzogJzAwJyxcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy91cGRhdGluZyByZWR1eCBzdG9yZSB3aXRoIGNvbXBsZXRlZCBhbmQgaW5jb21wbGV0ZSBzZXNzaW9uc1xuICAgICAgICB0aGlzLnVwZGF0ZVJvb3RTdG9yZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGF0Y2goIHN0YXJ0QWRkU2Vzc2lvbih7ZGF0ZTptb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJykgLGRhdGE6IHRoaXMuc2VsZWN0ZWRUYXNrfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVRhc2sgPSAodGFzaykgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhc2sudGFzayA9IHRhc2s7XG5cbiAgICAgICAgICAgIGlmKHRoaXMucHJvcHMuZGF0YSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkID0gdGhpcy5wcm9wcy5kYXRhW3RoaXMuc2VsZWN0ZWRUYXNrLnRhc2tdPyB0aGlzLnByb3BzLmRhdGFbdGhpcy5zZWxlY3RlZFRhc2sudGFza10uY29tcGxldGVkIDogMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFzay5pbmNvbXBsZXRlID0gdGhpcy5wcm9wcy5kYXRhW3RoaXMuc2VsZWN0ZWRUYXNrLnRhc2tdID8gdGhpcy5wcm9wcy5kYXRhW3RoaXMuc2VsZWN0ZWRUYXNrLnRhc2tdLmluY29tcGxldGUgOiAwO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFzay5pbmNvbXBsZXRlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vY2hhbmdlZCBjYXVzZSB0aG91Z2h0IHdoYXRldmVyIGlzIGJlaW5nIHJlbmRlcmVkIG5lZWRzIHRvIGJlIGluIHN0YXRlXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICB0b3RhbFNlc3Npb25zOiB0aGlzLnByb3BzLnRhc2tzW3RoaXMuc2VsZWN0ZWRUYXNrLnRhc2tdLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogdGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuZGF0YSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm9vdFN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHRoaXMuaW5jcmVDb21wbGV0ZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAvL29uZSBjYW4ndCBjb21wbGV0ZSBtb3JlIHRoYW4gdGFyZ2V0c1xuICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkID09PSB0aGlzLnN0YXRlLnRvdGFsU2Vzc2lvbnMpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYXNrLmNvbXBsZXRlZCA9IHRoaXMuc2VsZWN0ZWRUYXNrLmNvbXBsZXRlZCArIDE7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvb3RTdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7Li4uc3RhdGUsIGNvbXBsZXRlZDogdGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkfSkpO1xuXG4gICAgICAgICAgICBpZighdGhpcy5wcm9wcy5zZXR0aW5ncy5zaWxlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VuZHMucmluZy5jdXJyZW50LnBsYXkoKVxuICAgICAgICAgICAgaWYodGhpcy5wcm9wcy5zZXR0aW5ncy5ub3RpZmljYXRpb24pXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb24uc2VuZE5vdGlmaWNhdGlvbignV2VsbCBEb25lISBZb3UgY29tcGxldGVkIHlvdXIgZm9jdXNlZCBzZXNzaW9uIScpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluY3JlSW5jb21wbGV0ZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFzay5pbmNvbXBsZXRlID0gdGhpcy5zZWxlY3RlZFRhc2suaW5jb21wbGV0ZSArIDE7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvb3RTdG9yZSgpO1xuICAgICAgICB9O1xuICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgdGhpcy5zdGFydFNlc3Npb24gPSAodHlwZT0nZm9jdXNEdXJhdGlvbicpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKT0+e1xuXG4gICAgICAgICAgICAgICAgLy9pZiAxIHNlY29uZCBpcyBsZWZ0IGRlY3JlbWVudCBtaW51dGVzIGJ5IDEgYW5kIHNldCBzZWNvbmRzIHRvIDU5XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jb25maWcubG9jYWwuc2VjPT09MSB8fCB0aGlzLmNvbmZpZy5sb2NhbC5zZWM9PT0wKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwubWluID0gdGhpcy5jb25maWcubG9jYWwubWluIC0xIDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwuc2VjID0gNTk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvY2FsLnNlYyA9IHRoaXMuY29uZmlnLmxvY2FsLnNlYyAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY29uZmlnLmxvY2FsLm1pbiA8IDApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2NhbC5taW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2NhbC5zZWMgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcGFzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiB0aGlzLmNvbmZpZy5sb2NhbC5taW4+OT90aGlzLmNvbmZpZy5sb2NhbC5taW4udG9TdHJpbmcoKTpgMCR7dGhpcy5jb25maWcubG9jYWwubWluLnRvU3RyaW5nKCl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYzogdGhpcy5jb25maWcubG9jYWwuc2VjPjk/dGhpcy5jb25maWcubG9jYWwuc2VjLnRvU3RyaW5nKCk6YDAke3RoaXMuY29uZmlnLmxvY2FsLnNlYy50b1N0cmluZygpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiAoKHRoaXMuY29uZmlnLmxvY2FsLm1pbiAqIDYwICsgdGhpcy5jb25maWcubG9jYWwuc2VjKS8gKHRoaXMuY29uZmlnLmR1cmF0aW9uICo2MCkpICogMTAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSApO1xuICAgICAgICAgICAgICAgIC8vaWYgaXQgd2FzIGxhc3QgbWludXRlIGFuZCB0aW1lJ3MgdXAgaXQgd291bGQgaGF2ZSBiZWVuIHNldCB0byAtMSB3aGlsZSBjaGVja2luZyBzZWMgPT09MSBhYm92ZVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY29uZmlnLmxvY2FsLm1pbj09PTAgJiYgdGhpcy5jb25maWcubG9jYWwuc2VjPT09MCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGU9PT0nZm9jdXNEdXJhdGlvbicpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7Li4uc3RhdGUsIGJ0blN0YXR1czonbXVnJ30pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmJyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5jcmVDb21wbGV0ZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoey4uLnN0YXRlLCBidG5TdGF0dXM6J3BsYXkzJ30pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmJyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubmV3U2Vzc2lvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jb25maWcuaW50SWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5pbnRJZCA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sMTAwMCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmludElkID0gaW50ZXJ2YWxJZDtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLm5ld1Nlc3Npb24gPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF1c2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvbmZpZy5pbnRJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5pbnRJZCA9IC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdG9wID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5jb25maWcuaW50SWQgIT09IC0xIHx8IHRoaXMuY29uZmlnLnBhdXNlZCl7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuY29uZmlnLmJyZWFrKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluY3JlSW5jb21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmJyZWFrID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLm5ld1Nlc3Npb24gPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2NhbC5taW4gPSAwO1xuICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwuc2VjID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoey4uLnN0YXRlLGJ0blN0YXR1czoncGxheTMnLHBhc3M6e21pbjonMDAnLHNlYzonMDAnLHBlcmNlbnRhZ2U6MH19KSk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY29uZmlnLmludElkKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmludElkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgLy9mdW5jdGlvbiB0byBjb250cm9sIHRoZSBjbG9ja1xuICAgICAgICB0aGlzLndhdGNoQ29udHJvbCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUudG90YWxTZXNzaW9ucyAtIHRoaXMuc3RhdGUuY29tcGxldGVkID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgaWYodGhpcy5jb25maWcubmV3U2Vzc2lvbiAmJiAhdGhpcy5jb25maWcuYnJlYWspe1xuICAgICAgICAgICAgICAgIC8vY2xvY2sgbWF5IGJlIGlzIGJlaW5nIHN0YXJ0ZWQgYWZ0ZXIgaXQgd2FzIHBhdXNlZCBpbiB0aGF0IGNhc2Ugbm8gbmVlZCB0byB1cGRhdGUgY2xvY2sgc3RhdGVcbiAgICAgICAgICAgICAgICBpZighdGhpcy5jb25maWcucGF1c2VkKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuZHVyYXRpb24gPSB0aGlzLnByb3BzLnNldHRpbmdzLmZvY3VzRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvY2FsLm1pbiA9IHRoaXMucHJvcHMuc2V0dGluZ3MuZm9jdXNEdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwuc2VjID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0blN0YXR1czogJ3BhdXNlMicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiB0aGlzLnByb3BzLnNldHRpbmdzLmZvY3VzRHVyYXRpb248OT9gMCR7dGhpcy5wcm9wcy5zZXR0aW5ncy5mb2N1c0R1cmF0aW9ufWA6YCR7dGhpcy5wcm9wcy5zZXR0aW5ncy5mb2N1c0R1cmF0aW9ufWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjOiBgMDBgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRTZXNzaW9uKCk7XG4gICAgICAgICAgICB9ZWxzZSBpZighdGhpcy5jb25maWcubmV3U2Vzc2lvbiAmJiAhdGhpcy5jb25maWcucGF1c2VkICYmICF0aGlzLmNvbmZpZy5icmVhayl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7Li4uc3RhdGUsIGJ0blN0YXR1czoncGxheTMnfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKCF0aGlzLmNvbmZpZy5uZXdTZXNzaW9uICYmIHRoaXMuY29uZmlnLnBhdXNlZCAmJiAhdGhpcy5jb25maWcuYnJlYWspe1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoey4uLnN0YXRlLCBidG5TdGF0dXM6J3BhdXNlMid9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNlc3Npb24oKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKCF0aGlzLmNvbmZpZy5uZXdTZXNzaW9uICYmIHRoaXMuY29uZmlnLmJyZWFrKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuc291bmRzLnJpbmcuY3VycmVudC5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIGlmKCh0aGlzLnN0YXRlLmNvbXBsZXRlZCU0KSA9PT0gMCAmJiAodGhpcy5zdGF0ZS50b3RhbFNlc3Npb25zIC0gdGhpcy5zdGF0ZS5jb21wbGV0ZWQpPjQpe1xuICAgICAgICAgICAgICAgICAgICAvL2xvbmdicmVha1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5kdXJhdGlvbiA9IHRoaXMucHJvcHMuc2V0dGluZ3MubG9uZ0JyZWFrRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvY2FsLm1pbiA9IHRoaXMucHJvcHMuc2V0dGluZ3MubG9uZ0JyZWFrRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5TdGF0dXM6ICduZXh0MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBgJHt0aGlzLnByb3BzLnNldHRpbmdzLmxvbmdCcmVha0R1cmF0aW9ufWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjOiBgMDBgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNlc3Npb24oJycpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvL3Nob3J0YnJlYWtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuZHVyYXRpb24gPSB0aGlzLnByb3BzLnNldHRpbmdzLnNob3J0QnJlYWtEdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwubWluID0gdGhpcy5wcm9wcy5zZXR0aW5ncy5zaG9ydEJyZWFrRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5TdGF0dXM6ICduZXh0MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBgMCR7dGhpcy5wcm9wcy5zZXR0aW5ncy5zaG9ydEJyZWFrRHVyYXRpb259YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWM6IGAwMGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U2Vzc2lvbignJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgdGhpcy5hZGRBbWludXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwubWluICs9IDE7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5kdXJhdGlvbiArPSAxO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGVkdWN0QW1pbnV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuY29uZmlnLmxvY2FsLm1pbj4xKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5sb2NhbC5taW4gLT0gMTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmxvY2FsLm1pbiA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcubG9jYWwuc2VjID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAvL2NvbXBsZXRlZCB0YXNrIGNhbid0IGJlIG5lZ2F0aXZlXG4gICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkVGFzay5jb21wbGV0ZWQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYXNrLmNvbXBsZXRlZCA9IHRoaXMuc2VsZWN0ZWRUYXNrLmNvbXBsZXRlZCAtIDE7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvb3RTdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7Li4uc3RhdGUsIGNvbXBsZXRlZDogdGhpcy5zZWxlY3RlZFRhc2suY29tcGxldGVkfSkpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vbG9hZHMgdGhlIGluaXRpYWwgdGFzayB0byB0aGUgc3RhdGVcbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICBcbiAgICAgICAgaWYodGhpcy5wcm9wcy50YXNrcyl7XG4gICAgICAgICAgICBsZXQgdGFza3MgPSBPYmplY3Qua2V5cyh0aGlzLnByb3BzLnRhc2tzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFzayh0YXNrc1swXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vZnVuY3Rpb24gdG8gaGFuZGxlIHdoZW4gdGFzayBpcyBjaGFuZ2VkIFxuICAgIG9uVGFza0NoYW5nZSA9IChzZWxlY3RlZFRhc2spID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoc3RhdGUpID0+ICh7Li4uc3RhdGUsYnRuU3RhdHVzOlwicGxheTNcIn0pKTtcbiAgICAgICAgdGhpcy51cGRhdGVUYXNrKHNlbGVjdGVkVGFzayk7XG4gICAgICAgIC8vdGhpcy51cGRhdGVSb290U3RvcmUoKTtcbiAgICB9O1xuXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG5cbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdiBjbGFzc05hbWU9J2R5bmFtaWNsb2FkJz48UHJvY2Vzc2luZy8+PC9kaXY+fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9jdXMnPlxuICAgICAgICAgICAgICAgICAgICA8SW5kaWNhdG9ycyBhY3RpdmU9e3RoaXMuc3RhdGUudG90YWxTZXNzaW9ucyAtIHRoaXMuc3RhdGUuY29tcGxldGVkfSBpbmFjdGl2ZT17dGhpcy5zdGF0ZS5jb21wbGV0ZWR9Lz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZvY3VzX19idG5QYW5lbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Lyo9PT09PT09PT09PT09PT09PT09PT09PT1BREQgMU1JTiBCVVRUT049PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBpY29uPXsncGx1cyd9IGNsaWNrZWQ9e3RoaXMuYWRkQW1pbnV0ZX0vPlxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYXNrTGlzdCBvblRhc2tDaGFuZ2U9e3RoaXMub25UYXNrQ2hhbmdlfS8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKj09PT09PT09PT09PT09PT09PT09PT09PURlZHVjdCAxTUlOIEJVVFRPTj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGljb249eydtaW51cyd9IGNsaWNrZWQ9e3RoaXMuZGVkdWN0QW1pbnV0ZX0vPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPENsb2NrIHsuLi50aGlzLnN0YXRlLnBhc3N9Lz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZvY3VzX19idG5QYW5lbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGljb249e3RoaXMuc3RhdGUuYnRuU3RhdHVzfSBjbGlja2VkPXt0aGlzLndhdGNoQ29udHJvbH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBpY29uPXsndW5kbyd9IGNsaWNrZWQ9e3RoaXMucmVzdGFydH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBpY29uPXsnc3RvcDInfSBjbGlja2VkPXt0aGlzLnN0b3B9Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgPFNvdW5kIHJlZj17dGhpcy5zb3VuZHMucmluZ30vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgKVxuICAgIH1cbn1cblxuY29uc3QgbWFwc1N0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4ge1xuICAgLy8gY29uc29sZS5sb2coc3RhdGUpXG4gICAgaWYoc3RhdGUudGFza3Mpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogc3RhdGUuZGF0YVttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyldLFxuICAgICAgICAgICAgdGFza3M6IHN0YXRlLnRhc2tzLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHN0YXRlLmNvbmZpZ1xuICAgICAgICB9XG4gICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBzdGF0ZS5kYXRhW21vbWVudCgpLmZvcm1hdCgnWVlZWU1NREQnKV0sXG4gICAgICAgICAgICB0YXNrczogZmFsc2UsXG4gICAgICAgICAgICBzZXR0aW5nczogc3RhdGUuY29uZmlnXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59O1xuXG5jb25zdCBDb25uZWN0ZWRGb2N1cyA9IGNvbm5lY3QobWFwc1N0YXRlVG9Qcm9wcykoRm9jdXMpO1xuZXhwb3J0IGRlZmF1bHQgQ29ubmVjdGVkRm9jdXM7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2QkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFxUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF2UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQUNBO0FBWUE7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSkE7QUFDQTtBQVdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFBQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQUFBO0FBU0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSEE7QUFBQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF2UEE7QUF1UEE7QUFDQTs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7OztBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFJQTs7OztBQXpTQTtBQUNBO0FBMlNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///480\n')}}]);